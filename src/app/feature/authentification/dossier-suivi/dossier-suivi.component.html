<!-- Bannière supérieure -->
<header class="w-full h-2 flex fixed top-0 left-0 z-50">
    <div class="flex-1 bg-burkina-red"></div>
    <div class="flex-1 bg-burkina-yellow"></div>
    <div class="flex-1 bg-burkina-green"></div>
  </header>
  
  <main class="bg-gray-100 min-h-screen pt-12 font-sans">
    <div class="container max-w-5xl mx-auto p-4 sm:p-8">
      
      <!-- En-tête de la page -->
      <div class="text-center mb-12">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900">Suivi de votre demande</h1>
        <p class="mt-3 text-lg text-gray-600">Consultez l'état d'avancement de votre dossier en temps réel.</p>
        <span class="mt-4 inline-block bg-gray-200 text-gray-900 px-4 py-2 rounded-full font-semibold">
          Dossier N° : {{ id }}
        </span>
      </div>
  
      <!-- Stepper / Barre de progression -->
      <div class="relative mb-12">
        <!-- Ligne de progression -->
        <div class="absolute top-5 left-0 w-full h-1 bg-gray-200">
          <div class="h-full bg-burkina-green transition-all duration-500" [style.width.%]="progressPercentage"></div>
        </div>
  
        <!-- Étapes du stepper -->
        <div class="relative flex justify-between">
          <div 
            *ngFor="let step of steps; let i = index" 
            class="flex flex-col items-center text-center w-24 cursor-pointer group"
            (click)="selectStep(i)">
            
            <div 
              class="w-10 h-10 rounded-full border-4 flex items-center justify-center bg-white transition-all duration-300"
              [ngClass]="{
                'border-burkina-green text-white bg-burkina-green': step.status === 'completed',
                'border-burkina-green text-burkina-green scale-110 shadow-lg': i === selectedIndex,
                'border-gray-300 text-gray-400': step.status === 'pending' && i !== selectedIndex
              }">
              <i class="pi" [ngClass]="step.status === 'completed' ? 'pi-check' : step.icon"></i>
            </div>
            </a>
           
        </div>
        <div class="mr-5">
          <span class="example-spacer"></span>
      <span class="example-spacer"></span>
      <span class="example-spacer"></span>
      <span class="example-spacer"></span>
     
      <button type="button" [routerLink]="'/deliacte/procedure-published'" routerLinkActive="active" class="py-2.5 px-5 me-2 mb-2 text-sm font-medium text-gray-900 
      focus:outline-none bg-white rounded-full border border-gray-200 
      hover:bg-Green-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 
      dark:bg-green-800 dark:text-green-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-green-700">Acceuil</button>
      <button type="button" [routerLink]="'/deliacte/login'"  routerLinkActive="active" class="py-2.5 px-5 me-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none 
      bg-white rounded-full border border-gray-200 hover:bg-gray-100 hover:bg-gray-100 focus:z-10 
      focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 
      dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700">Se Connecter</button>
        </div>
    </div>
</div>

<div class="card px-6 py-36" >
    
    <div style="display: inline-flex; " >
        <p-button icon="pi pi-arrow-left" (onClick)="retourPage()" [rounded]="true" [text]="true" title="retour en arrière" [raised]="true" severity="help" />
    </div>
    <p-divider align="left">
        <div class="inline-flex " style="color:#060;">
            <b>Etat de mon dossier</b>
        </div>
    </p-divider>
    <p-timeline [value]="events2" layout="horizontal" align="top">
        <ng-template pTemplate="marker" let-event>
          <!-- Personnalisation du marker avec couleur et icône -->
          <span class="custom-marker shadow-2" [style.backgroundColor]="event.color">
            <i [ngClass]="event.icon"></i> <!-- Icône dynamique -->
          </span>
        </ng-template>
        <ng-template pTemplate="content" let-event>
          <!-- Contenu textuel de l'événement -->
          <div class="event-content">
            {{ event.status }}
          </div>
        </ng-template>
      </p-timeline>
      
  </div>

  <div class="flex min-h-full flex-col justify-center px-2 py-2 lg:px-8" >
    <div class="sm:mx-auto sm:w-full sm:max-w-sm" >
        <h2 class="mt-4 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900"> Mes informations</h2>
    </div>  

    <div class="grid gap-6 mb-6 md:grid-cols-2 disabled-section" [class.disabled]="isDisabled">
        <ng-container *ngFor="let champ of dossier; let i = index">
            <div *ngIf="['TEXT', 'RANGE', 'NUMBER', 'EMAIL', 'PASSWORD', 'DATE'].includes(champ.champOperation.inputType)" class="col-span-1">
                <label [for]="'input-' + i" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ champ.champOperation.name }}</label>
                <input [type]="champ.inputType" [id]="'input-' + i" 
                       class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" 
                       required [(ngModel)]="champ.name"/>
            </div>
        
            <div *ngIf="champ.champOperation.inputType === 'TEXTAREA'" class="col-span-1">
                <label [for]="'input-' + i" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ champ.champOperation.name }}</label>
                <textarea id="message" rows="4" [(ngModel)]="champ.name" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Write your thoughts here..."></textarea>
            </div>
        
            <div *ngIf="['RADIO'].includes(champ.champOperation.inputType)" class="col-span-1">
                <label [for]="'input-' + i" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ champ.champOperation.name }}</label>
                <div class="flex flex-wrap" *ngIf="champ.champOperation.options">
                    <div *ngFor="let option of champ.champOperation.options; let j = index"> 
                        <div class="flex items-center me-4">
                            <input 
                                [id]="'option-' + i + '-' + j" 
                                type="RADIO" 
                                [value]="option.name" 
                                [(ngModel)]="champ.name"  
                                name="radio-group-{{i}}"                        
                                class="w-4 h-4 text-red-600 bg-gray-100 border-gray-300 focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label [for]="'option-' + i + '-' + j" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{option.name}}</label>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="['CHECKBOX'].includes(champ.inputType)" class="col-span-1">
                <label [for]="'input-' + i" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ champ.champOperation.name }}</label>
                <div class="flex flex-wrap" *ngIf="champ.champOperation.options">
                    <div *ngFor="let option of champ.champOperation.options; let j = index"> 
                        <div class="flex items-center me-4">
                            <input 
                                [id]="'option-' + i + '-' + j" 
                                type="CHECKBOX" 
                                [value]="option.name" 
                                [(ngModel)]="champ.name"  
                               
                                class="w-4 h-4 text-red-600 bg-gray-100 border-gray-300 focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label [for]="'option-' + i + '-' + j" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{option.name}}</label>
                        </div>
                    </div>
                </div>
            </div>
        
            <div *ngIf="['PDF', 'FILE', 'IMAGE'].includes(champ.champOperation.inputType)" class="col-span-1">
                <label [for]="'input-' + i" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                  {{ champ.champOperation.name }}
                </label>
                
                <!-- Conteneur flex pour l'input et le bouton -->
                <div class="flex items-center space-x-2">
                  <!-- Input de fichier -->
                  <input 
                    class="block w-full text-sm text-gray-900 border border-gray-300 
                    rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none 
                    dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400" 
                    id="file_input_{{i}}" 
                    type="file" 
                   >
                  
                  <!-- Bouton -->
                  <!--button (click)="voirDoc(champ.name)"
                    type="button" style="background-color: #060;"
                    class="text-white bg-red-600 hover:bg-red-700 focus:outline-none font-medium rounded-lg text-sm px-4 py-2">
                    Voir
                  </button-->
                </div>
              
                <!-- Affichage du fichier sélectionné -->
                <div *ngIf="champ.name">
                  <p>Fichier sélectionné : {{ champ.name }}</p>
                </div>
              </div>
              
            <div *ngIf="champ.champOperation.inputType === 'SELECT'" class="col-span-1">
                <label [for]="'input-' + i" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">{{ champ.champOperation.name }}</label>
                <select [id]="'select-' + i" [(ngModel)]="champ.name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                    <option selected>Choisir {{ champ.champOperation.name }}</option>
                    <option *ngFor="let option of champ.champOperation.options" [value]="option.name">{{ option.name }}</option>
                </select>
            </div>

        </ng-container>
    </div>
  </div>
  